"use strict";function price(){var t=0,n=0;$(".sn").map(function(){$(this).prop("checked")&&(t+=Number($(this).siblings().eq(4).html()),n++)}),$(".totalp").html(t+"å…ƒ"),$(".twonum").html(n)}function getCookie(t){for(var n=document.cookie.split("; "),p=0;p<n.length;p++){var i=n[p].split("=");if(i[0]===t)return i[1]}}$(function(){$.get("http://jx.xuzhixiang.top/ap/api/cart-list.php",{id:getCookie("id")}).then(function(t){t=t.data;var n="";t.forEach(function(t){n+='<li>\n                <input type="checkbox" class="sn">\n                <p class="pi"><img src="'.concat(t.pimg,'" alt=""></p>\n                <span class="pt">').concat(t.pname,'</span>\n                <span class="pr">').concat(t.pprice,'</span>\n                <p data-pid="').concat(t.pid,'"><span class="minus">-</span><input type="text" value="').concat(t.pnum,'" class="pnumz"><span class="plus">+</span></p>\n                <span class="sp">').concat(t.pprice*t.pnum,'</span>\n                <span class="del" data-pid="').concat(t.pid,'">x</span>\n             </li>')}),$(".cartlist").html(n),$(".onenum").html($(".cartlist li").length),$(".checkall").click(function(){$(".sn").prop("checked",$(this).prop("checked")),price()}),$(".sn").click(function(){console.log($(".sn").not($(this)).prop("checked"));var t=0;$(".sn").map(function(){$(this).prop("checked")&&t++}),t==$(".sn").length?$(".checkall").prop("checked",!0):$(".checkall").prop("checked",!1),price()}),$(".minus").click(function(){$(this).parent().find(".pnumz").val(Number($(this).parent().find(".pnumz").val())-1),$(this).parent().find(".pnumz").val()<=1&&$(this).parent().find(".pnumz").val(1);var t=$(this).parent().attr("data-pid"),n=$(this).parent().find(".pnumz").val(),p=$(this).parent().parent().find(".pr").html();$(this).parent().parent().find(".sp").html(p*n),$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:getCookie("id"),pid:t,pnum:n}).then(function(){price()})}),$(".plus").click(function(){$(this).parent().find(".pnumz").val(Number($(this).parent().find(".pnumz").val())+1);var t=$(this).parent().attr("data-pid"),n=$(this).parent().find(".pnumz").val(),p=$(this).parent().parent().find(".pr").html();$(this).parent().parent().find(".sp").html(p*n),$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:getCookie("id"),pid:t,pnum:n}).then(function(){price()})}),$(".pnumz").on("change",function(){$(this).val()<=1&&$(this).val(1);var t=$(this).parent().attr("data-pid"),n=$(this).val(),p=$(this).parent().parent().find(".pr").html();$(this).parent().parent().find(".sp").html(p*n),$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:getCookie("id"),pid:t,pnum:n},function(){price()})}),$(".del").click(function(){$.get("http://jx.xuzhixiang.top/ap/api/cart-delete.php",{uid:getCookie("id"),pid:$(this).attr("data-pid")}),$(this).parent().remove(),price(),$(".onenum").html($(".cartlist li").length)})})});